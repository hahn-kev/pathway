%%
%% This is file `pstricks.sty' based on the code of `pstcol.sty'.
%%
%% IMPORTANT NOTICE:
%%
%% pstricks.sty Copyright (C) 1997 Timothy Van Zandt
%% pstcol.sty   Copyright (C) 1994-1996 1999 David Carlisle
%% pstricks.sty Copyright (C) 2004 -2005 Herbert Voss <voss@perce.de>
%%                                 Rolf Niepraschk <Rolf.Niepraschk@ptb.de>
%%
%% This package may be distributed under the terms of the LaTeX Project
%% Public License, as described in lppl.txt in the base LaTeX distribution.
%% Either version 1.0 or, at your option, any later version.
%%

\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{pstricks}
  [2005/06/02 v0.24 LaTeX wrapper for `PSTricks' (RN,HV)]

\@ifpackageloaded{pstcol}{}{\let\saved@gray\color@gray}

\newif\ifpst@DIA\pst@DIAfalse
\DeclareOption{DIA}{\pst@DIAtrue}
\@ifundefined{PSTricksLoaded}
{%
%  \let\saved@scalebox\scalebox
  \input{pstricks.tex}
  \ProvidesFile{pstricks.tex}
    [\filedate\space v\fileversion\space `PSTricks' (tvz)]
%  \let\psscalebox=\scalebox%
}{}

%\let\psscaleboxto\scaleboxto%

\newif\ifpst@PSforPDF\pst@PSforPDFfalse
\DeclareOption{pdf}{\pst@PSforPDFtrue}
%
%\newif\ifpst@setcolors\pst@setcolorsfalse
%\DeclareOption{setcolors}{\pst@setcolorstrue}

\def\pst@LaTeX@Setup{%
  \PassOptionsToPackage{override}{xcolor}
%
  \IfFileExists{xcolor.sty}%
    {\def\pst@ColorPackage{xcolor}}{\def\pst@ColorPackage{color}}%
%
  \DeclareOption*{\PassOptionsToPackage\CurrentOption{\pst@ColorPackage}}
  \DeclareOption{noxcolor}{\def\pst@ColorPackage{color}}
  \ProcessOptions\relax
  \ifpst@PSforPDF
    \RequirePackage{ps4pdf}
  \fi%
%  \ifpst@setcolors
%    \RequirePackage{pst-color}
%    \PassOptionsToPackage{dvipsnames}{\pst@ColorPackage}
%  \fi%
  \RequirePackage{\pst@ColorPackage}
%
  \@ifpackageloaded{xcolor}{%
    \@ifpackagelater{xcolor}{2004/05/02}%
    {%
      \let\pst@getcolor\XC@getcolor
      \let\pst@usecolor\XC@usecolor
    }
    {%
      \PackageError{pstricks}{%
      *************************************************\MessageBreak
      * Your Version of `xcolor.sty' is too old!\MessageBreak
      * You need the version from 2004/05/02 or newer\MessageBreak
      * or use: \string\usepackage[noxcolor]{pstricks}\MessageBreak
      *************************************************}{}%
    }%
  }{%
    \def\pst@getcolor##1##2{%
      \@ifundefined{\string\color@##1}%
      {\@pstrickserr{Color `##1' not defined}\@eha}%
      {\edef##2{##1}}}%
    \def\pst@usecolor##1{\expandafter\expandafter\expandafter\c@lor@to@ps%
      \csname\string\color@##1\endcsname\@@\space}%
    \definecolor{darkgray}{gray}{.25}
    \definecolor{gray}{gray}{.5}
    \definecolor{lightgray}{gray}{.75}
  }%

  \definecolor{gradbegin}{rgb}{0,1,1}
  \definecolor{gradend}{rgb}{0,.1,.95}

  \@ifpackageloaded{pstcol}{%
    \psset@bordercolor{white}
    \psset@doublecolor{white}
    \psset@linecolor{black}
    \psset@fillcolor{white}
    \psset@hatchcolor{black}
    \psset@gridcolor{black}
    \psset@gridlabelcolor{black}
    \psset@shadowcolor{darkgray}
    \psset@subgridcolor{gray}
  }{}%
%
  \def\newgray##1##2{%
    \expandafter\gdef\csname ##1\endcsname{\color{##1}}%  HV 2004-03-31
    \edef\@tempa{\noexpand\definecolor{##1}{gray}{##2}}\@tempa%
    \expandafter\xdef\csname color@##1\endcsname{##2 setgray}%  HA 2005-02-24
  }%
  \def\newrgbcolor##1##2{%
    \expandafter\gdef\csname ##1\endcsname{\color{##1}}%  HV 2004-03-31
    \edef\@tempa{\noexpand\newrgbcolorx{##1}##2\noexpand\@@}\@tempa
    \expandafter\xdef\csname color@##1\endcsname{##2 setrgbcolor}%  HA 2005-02-24
  }
  \def\newrgbcolorx##1##2 ##3 ##4\@@{%
    \definecolor{##1}{rgb}{##2,##3,##4}}
  \def\newcmykcolor##1##2{%
    \expandafter\gdef\csname ##1\endcsname{\color{##1}}%  HV 2004-03-31
    \edef\@tempa{\noexpand\newcmykcolorx{##1}##2\noexpand\@@}\@tempa
    \expandafter\xdef\csname color@##1\endcsname{##2 setcmykcolor}%  HA 2005-02-24
  }%
  \def\newcmykcolorx##1##2 ##3 ##4 ##5\@@{%
    \definecolor{##1}{cmyk}{##2,##3,##4,##5}}
  \def\newhsbcolor##1##2{%
    \expandafter\gdef\csname ##1\endcsname{\color{##1}}%  HV 2004-03-31
    \edef\@tempa{\noexpand\newhsbcolorx{##1}##2\noexpand\@@}\@tempa
    \expandafter\xdef\csname color@##1\endcsname{##2 sethsbcolor}%  HA 2005-02-24
  }%
  \def\newhsbcolorx##1##2 ##3 ##4\@@{%
    \definecolor{##1}{hsb}{##2,##3,##4}}%
%
  \renewcommand\black{\color{black}}
  \renewcommand\darkgray{\color{darkgray}}
  \renewcommand\gray{\color{gray}}
  \renewcommand\lightgray{\color{lightgray}}
  \renewcommand\white{\color{white}}
  \renewcommand\blue{\color{blue}}
  \renewcommand\red{\color{red}}
  \renewcommand\green{\color{green}}
  \renewcommand\yellow{\color{yellow}}
  \renewcommand\magenta{\color{magenta}}
  \renewcommand\cyan{\color{cyan}}
%
  \let\pst@LaTeX@Setup=\relax%
}

\@ifpackageloaded{pstcol}% Is our package called from `pstcol'?
{%
%  We use our own definitions even if `pstcol' is in the first
%  place (adding to pstcol's \AtEndOfPackage hook). RN 2004-05-02
  \expandafter\g@addto@macro\csname pstcol.sty-h@@k\endcsname{%
    \pst@LaTeX@Setup}%
}%
{%
  \let\color@gray\saved@gray%
% Dummy version entry for `pstcol' to prevent forther loading. RN 2004-04-22
  \@namedef{ver@pstcol.sty}{1938/01/10}% The birthday of Don Knuth
  \PassOptionsToPackage{usenames}{color}
  \pst@LaTeX@Setup%
}

\ifpst@PSforPDF
  \def\pspicture{\PSforPDF%
  \begingroup\pst@ifstar\pstpicture@i}
\fi

\AtBeginDocument{%
  \@ifpackageloaded{pstcol}%
  {%
    \@ifpackagelater{pstcol}{1938/01/11}{% Really loaded? RN 2004-04-22
      \PackageWarningNoLine{pstricks}{%
      *************************************************\MessageBreak
      * The installed version of `pstricks.sty' doesn't\MessageBreak
      * need `pstcol' any more. You should write only:\MessageBreak
      * \@spaces\string\usepackage{pstricks}\MessageBreak
      *************************************************}
    }{\expandafter\let\csname ver@pstcol.sty\endcsname\relax}%
  }{}%
%  \ifpst@DIA\else\@ifundefined{saved@scalebox}{}{\let\scalebox=\saved@scalebox}\fi%
  \let\pst@endcolor=\relax%
% LaTeX used `\color@endgroup' instead. RN 2004-05-06
}
%
\endinput
%%
%% End of file `pstricks.sty'.
